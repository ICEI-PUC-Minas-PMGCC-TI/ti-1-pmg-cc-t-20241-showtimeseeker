<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/pcrs/style_perfil.css">
    <script src="/pcrs/ED_deslogar.js"></script>
    <link rel="stylesheet" href="/pcrs/valid_login.js">
    <title>Perfil</title>
</head>
<body>
    <header>
        <div class="banner">
            <div class="foto">
            </div>
            <div class="bio">
                <h2 id="nome">Nome</h2>
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Tenetur beatae quidem aspernatur vitae deleniti nemo quasi, fugit ex, officiis iste, repellendus repudiandae modi possimus suscipit fugiat! Ad velit vitae corporis.
                    Tempora, soluta vitae aspernatur iusto eos nostrum voluptate quis at amet a ea reiciendis eaque unde mollitia, iste dolor magni vero voluptatibus maxime minima atque ipsa autem corporis? Distinctio, nulla.</p>
                </div>
                <div class="botoes">
                    <button class="editar_perfil" onclick="ir_para_alteracao();">Editar perfil</button>
                    <button class="sair_perfil" onclick="deslogar();">Deslogar</button>
                </div>
            </div>
            
        </header>
        <main>
            <div class="evento">
                <h1>Evento 1</h1>
                <div class="linha"></div>
                <div class="infos">
                    <div class="chart">
                        <div class="bar" id="gosto-1" ></div>
                        <div class="bar" id="gosto-2" ></div>
                        <div class="bar" id="gosto-3" ></div>
                        <div class="bar" id="gosto-4" ></div>
                    </div>
                    <div class="info-add">
                        <div class="visualizacao">
                            <h1>Numero totais de visualizações</h1>
                            <h1 id="visu">0</h1>
                            <h2 id="g1">Gosto 1: 0</h2>
                            <h2 id="g2">Gosto 2: 0</h2>
                            <h2 id="g3">Gosto 3: 0</h2>
                            <h2 id="g4">Gosto 4: 0</h2>
                        </div>
                        <div class="favoritados">
                            <h1>Numero totais de favoritados</h1>
                            <h1 id="fav">0</h1>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <script>
            //exemplo de json
            let ED_visuJson = '{"visualizacao": [{"gosto": "gosto1","visualizacao": 1000},{"gosto": "gosto2","visualizacao": 100},{"gosto": "gosto3","visualizacao": 800},{"gosto": "gosto4","visualizacao": 550}]}';
    
            let ED_visuObj = JSON.parse(ED_visuJson);
            
            var fatorEscala = 0.2;
    
            // Função para calcular e ajustar a altura das barras proporcionalmente
            function ajustarAlturaDasBarras() {
                var ED_barra_1 = document.getElementById('gosto-1');
                var ED_barra_2 = document.getElementById('gosto-2');
                var ED_barra_3 = document.getElementById('gosto-3');
                var ED_barra_4 = document.getElementById('gosto-4');
                var numVisu = document.getElementById('visu');
                var numFav = document.getElementById('fav');
                var ED_novG1 =document.getElementById('g1');
                var ED_novG2 =document.getElementById('g2');
                var ED_novG3 =document.getElementById('g3');
                var ED_novG4 =document.getElementById('g4');

                // Calcula as novas alturas proporcionalmente ao valor recebido
                var novaAltura1 = ED_visuObj.visualizacao[0].visualizacao * fatorEscala;
                var novaAltura2 = ED_visuObj.visualizacao[1].visualizacao * fatorEscala;
                var novaAltura3 = ED_visuObj.visualizacao[2].visualizacao * fatorEscala;
                var novaAltura4 = ED_visuObj.visualizacao[3].visualizacao * fatorEscala;
                
                
                //somar as visualizações e exemplo de favoritados
                var somaVisu =  ED_visuObj.visualizacao[0].visualizacao + ED_visuObj.visualizacao[1].visualizacao + ED_visuObj.visualizacao[2].visualizacao + ED_visuObj.visualizacao[3].visualizacao;
                var totFav = 20; //exemplo de numero de favoritos


                //imprimir o numero de visualização e favoritos
                numVisu.textContent = somaVisu;
                numFav.textContent = totFav;
                ED_novG1.textContent = "gosto 1: " + novaAltura1 / fatorEscala;
                ED_novG2.textContent = "gosto 2: " + novaAltura2 / fatorEscala;
                ED_novG3.textContent = "gosto 3: " + novaAltura3 / fatorEscala;
                ED_novG4.textContent = "gosto 4: " + novaAltura4 / fatorEscala;

                // Define as novas alturas das barras
                ED_barra_1.style.height = novaAltura1 + 'px';
                ED_barra_2.style.height = novaAltura2 + 'px';
                ED_barra_3.style.height = novaAltura3 + 'px';
                ED_barra_4.style.height = novaAltura4 + 'px';
            }
    
            // Chama a função para ajustar a altura das barras quando a página carregar
            window.onload = ajustarAlturaDasBarras;
        </script>
    </body>
    </html>